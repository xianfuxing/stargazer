{% extends 'server_base.html' %}
{% load common_tags %}

{% block title %}
    服务器列表
{% endblock title %}
{% block content %}
    <table class="table">
    <thead>
        <tr>
            <th>主机名</th>
            <th>IP地址</th>
            <th>组织</th>
            <th>状态</th>
        </tr>
    </thead>
    <tbody>
        {% for host in hosts %}
            <tr>
                <td class="hostname"><a href="{% url 'server:detail' host.id %}">{{ host.hostname }}</a></td>
                <td>{{ host.ip }}</td>
                <td>{{ host.org.name }}</td>
                <td class="{% get_server_alert_status host.id %}">{{ host.get_status_display }}</td>
            </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <p>总共：{{ host_count }}台服务器</p>
    </tfoot>
    </table>
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if page_obj.has_previous %}
            <li>
              <a href="?{{ page_obj.previous_page_number.querystring }}" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
              </a>
            </li>
            {% endif %}
            {% for page in page_obj.pages %}
                {% if page %}
                    {% ifequal page page_obj.number %}
                        <li class="active"><a>{{ page }}</a></li>
                    {% else %}
                        <li><a href="?{{ page.querystring }}">{{ page }}</a></li>
                     {% endifequal %}
                 {% else %}
                      ...
                 {% endif %}
            {% endfor %}
            {% if page_obj.has_next %}
            <li>
              <a href="?{{ page_obj.next_page_number.querystring }}" aria-label="Previous">
                <span aria-hidden="true">&raquo;</span>
              </a>
            </li>
            {% endif %}
        </ul>
    </nav>
{% endblock %}